<div class="row">
  <div class="col-8">
    <div class="panel">
      <alto-dropdown-filter
        class="float-end mx-2 float-end"
        [data]="teams"
        [selectedItems]="selectedTeams"
        [displayLabel]="'label'"
        [placeholder]="I18ns.statistics.globalPerformance.perTeamPerformance.teamFilter"
        (selectChange)="filterTeams($event)"
        [isColored]="true"
      ></alto-dropdown-filter>
      <h2>{{ I18ns.statistics.globalPerformance.perTeamPerformance.scoreEvolution.title }}</h2>
      <p>{{ I18ns.statistics.globalPerformance.perTeamPerformance.scoreEvolution.subtitle }}</p>
      <div class="chart-container">
        <canvas id="teamScoreEvolution"></canvas>
      </div>
    </div>
  </div>

  <div *ngIf="scoredTeams.length <= 10; else leaderboardFull" class="col-4">
    <div class="panel">
      <h2 class="mb-4">{{ I18ns.statistics.globalPerformance.perTeamPerformance.leaderboard.title }}</h2>
      <ol class="list-group list-group-flush list-group-numbered">
        <li class="list-group-item" *ngFor="let team of scoredTeams">
          <div class="float-end d-flex flex-nowrap">
            <p class="me-3">
              {{ team.score | percent }}
            </p>
            <alto-progression-badge [score]="team.progression"></alto-progression-badge>
          </div>
          {{ team.label }}
        </li>
      </ol>
    </div>
  </div>
  <ng-template #leaderboardFull>
    <div class="col-4">
      <div class="panel">
        <h1>{{ I18ns.statistics.globalPerformance.perTeamPerformance.leaderboard.top }}</h1>
        <ol class="list-group list-group-flush list-group-numbered">
          <li class="list-group-item" *ngFor="let team of scoredTeams.slice(0, 5)">
            <div class="float-end d-flex flex-nowrap">
              <p class="me-3">
                {{ team.score | percent }}
              </p>
              <alto-progression-badge [score]="team.progression"></alto-progression-badge>
            </div>
            {{ team.label }}
          </li>
        </ol>
        <h1>{{ I18ns.statistics.globalPerformance.perTeamPerformance.leaderboard.flop }}</h1>
        <ol class="list-group list-group-flush list-group-numbered">
          <li
            class="list-group-item"
            *ngFor="let team of scoredTeams.slice(scoredTeams.length - 5, scoredTeams.length)"
          >
            <div class="float-end d-flex flex-nowrap">
              <p class="me-3">
                {{ team.score | percent }}
              </p>
              <alto-progression-badge [score]="team.progression"></alto-progression-badge>
            </div>
            {{ team.label }}
          </li>
        </ol>
      </div>
    </div>
  </ng-template>
</div>
